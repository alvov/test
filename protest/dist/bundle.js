!function(t){function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=304)}({115:function(t,e,i){"use strict";var s={initial:[{type:"spritesheet",key:"langButtons",url:i(306),frameWidth:50,frameHeight:50}],helpTouch:[{type:"spritesheet",key:"helpMove",url:i(307),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"helpRun",url:i(308),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"helpPoster",url:i(309),frameWidth:70,frameHeight:70}],helpDesktop:[{type:"spritesheet",key:"helpMove",url:i(310),frameWidth:150,frameHeight:50},{type:"spritesheet",key:"helpRun",url:i(311),frameWidth:150,frameHeight:50},{type:"spritesheet",key:"helpPoster",url:i(312),frameWidth:250,frameHeight:50}],levelCommon:[{type:"spritesheet",key:"playButton",url:i(313),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"repeatButton",url:i(314),frameWidth:100,frameHeight:100},{type:"spritesheet",key:"soundButtons",url:i(315),frameWidth:50,frameHeight:50},{type:"audio",key:"theme",urls:i(316)},{type:"audio",key:"punch01",urls:i(317)},{type:"audio",key:"punch02",urls:i(318)},{type:"audio",key:"applause",urls:i(319)},{type:"audio",key:"boo",urls:i(320)},{type:"audio",key:"croud",urls:i(321)},{type:"audio",key:"scream03",urls:i(322)},{type:"audio",key:"truck",urls:i(323)},{type:"audio",key:"pick",urls:i(324)}],level1:[{type:"spritesheet",key:"border",url:i(116),frameWidth:100,frameHeight:50},{type:"spritesheet",key:"auto",url:i(117),frameWidth:290,frameHeight:135},{type:"spritesheet",key:"cop",url:i(325),frameWidth:44,frameHeight:49},{type:"spritesheet",key:"shield",url:i(118),frameWidth:316,frameHeight:140},{type:"spritesheet",key:"journalist",url:i(119),frameWidth:32,frameHeight:49},{type:"spritesheet",key:"player",url:i(120),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester1",url:i(121),frameWidth:32,frameHeight:48},{type:"spritesheet",key:"protester2",url:i(122),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester3",url:i(123),frameWidth:30,frameHeight:47},{type:"spritesheet",key:"injury",url:i(124),frameWidth:30,frameHeight:31},{type:"spritesheet",key:"poster",url:i(125),frameWidth:60,frameHeight:71},{type:"image",key:"ground",url:i(326),overwrite:!1}],level2:[{type:"spritesheet",key:"border",url:i(116),frameWidth:100,frameHeight:50},{type:"spritesheet",key:"auto",url:i(117),frameWidth:290,frameHeight:135},{type:"spritesheet",key:"cop",url:i(327),frameWidth:46,frameHeight:54},{type:"spritesheet",key:"swat",url:i(328),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"shield",url:i(118),frameWidth:316,frameHeight:140},{type:"spritesheet",key:"journalist",url:i(119),frameWidth:32,frameHeight:49},{type:"spritesheet",key:"player",url:i(120),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester1",url:i(121),frameWidth:32,frameHeight:48},{type:"spritesheet",key:"protester2",url:i(122),frameWidth:30,frameHeight:46},{type:"spritesheet",key:"protester3",url:i(123),frameWidth:30,frameHeight:47},{type:"spritesheet",key:"injury",url:i(124),frameWidth:30,frameHeight:31},{type:"spritesheet",key:"poster",url:i(125),frameWidth:60,frameHeight:71},{type:"image",key:"ground",url:i(329),overwrite:!1}]};e.a=JSON.stringify(s)},116:function(t,e,i){t.exports=i.p+"assets/6de19dd8a50184e808601049e3864f02.png"},117:function(t,e,i){t.exports=i.p+"assets/570cb45ba3589144f3858f3d0385a88d.png"},118:function(t,e,i){t.exports=i.p+"assets/75acaf7dc3fb09428e30d09953735c10.png"},119:function(t,e,i){t.exports=i.p+"assets/0db8c7aedd9b6876feb9ee4371b27d14.png"},120:function(t,e,i){t.exports=i.p+"assets/c73e25fb0b044d025cd031db52c0704b.png"},121:function(t,e,i){t.exports=i.p+"assets/c319d1c800f4e0f8c49b21f55ef1ee16.png"},122:function(t,e,i){t.exports=i.p+"assets/51eaa920cd842f906dbb0ab9dafb2046.png"},123:function(t,e,i){t.exports=i.p+"assets/373325f07721a6c1f012d59948a7b889.png"},124:function(t,e,i){t.exports=i.p+"assets/d4bedbdde1c2adef9d869553fe67a350.png"},125:function(t,e,i){t.exports=i.p+"assets/28dbeb6c57f67cd17abbd912371bac9c.png"},126:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=i(83),n=i(8),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=function t(e,i,s){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(s)},u=function(t){function e(t){var i=t.game,a=t.x,o=t.y,n=t.speed,h=t.spriteKey,l=t.spriteName,u=t.onDropPoster;s(this,e);var p=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:i,x:a,y:o,speed:n,spriteKey:h,spriteName:l}));return p.injurySprite=p.sprite.addChild(p.game.make.sprite(-15,-p.sprite.height/2-2,"injury")),p.injurySprite.bringToTop(),p.injurySprite.visible=!1,p.posterSprite=p.sprite.addChild(p.game.make.sprite(-10,11,"poster",0)),p.posterSprite.bringToTop(),p.posterSprite.anchor.set(.5,1),p.posterSprite.visible=!1,p.showPoster=!1,p.dropPoster=1,p.onDropPoster=u,p}return a(e,t),h(e,[{key:"update",value:function(){this.injurySprite.visible=1!==this.sprite.health,this.posterSprite.visible=this.posterSprite.alive&&this.showPoster,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case n.O:this.dropPosterRnd(),this.moveTo(null);var s=i.x,r=i.y;this.sprite.x=s,this.sprite.y=r}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t,i)}},{key:"dropPosterRnd",value:function(){this.game.rnd.frac()<this.dropPoster&&(this.posterSprite.kill(),this.onDropPoster({x:this.sprite.x,y:this.sprite.y}))}}]),e}(o.a);e.a=u},127:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a,o=i(8),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),h=(a={},r(a,o.k,3816022),r(a,o.j,5651002),a),l=function(){function t(e){var i=e.game,r=e.radius,a=e.angle,o=e.colors,n=void 0===o?h:o;s(this,t),this.game=i,this.radius=r,this.radiusSq=Math.pow(this.radius,2),this.halfViewAngle=this.game.math.degToRad(a/2),this.colors=n,this.graphics=this.game.add.graphics(0,0),this.center=null,this.isActive=!0}return n(t,[{key:"update",value:function(t){var e,i=t.x,s=t.y,r=t.angle,a=t.mode;if(this.center={x:i,y:s},this.angle=r,this.graphics.clear(),this.isActive){var n=this.angle-this.halfViewAngle,h=this.angle+this.halfViewAngle,l=[i+Math.cos(n)*this.radius,s+Math.sin(n)*this.radius];this.graphics.beginFill(this.colors[a||o.k],.4),this.graphics.moveTo(i,s),(e=this.graphics).lineTo.apply(e,l),this.graphics.arc(i,s,this.radius,n,h,!1,10),this.graphics.lineTo(i,s),this.graphics.endFill()}}},{key:"containsPoint",value:function(t){var e=t.x,i=t.y;if(!this.center)return!1;if(this.game.math.distanceSq(this.center.x,this.center.y,e,i)>this.radiusSq)return!1;var s=this.game.math.angleBetweenPoints(this.center,{x:e,y:i}),r=this.angle-this.halfViewAngle,a=this.angle+this.halfViewAngle;return r<=s&&s<=a||(s-=2*Math.PI*Math.sign(s),r<=s&&s<=a)}},{key:"destroy",value:function(){this.graphics.destroy(),this.isActive=!1}},{key:"kill",value:function(){this.graphics.kill(),this.isActive=!1}},{key:"revive",value:function(){this.graphics.revive(),this.isActive=!0}}]),t}();e.a=l},128:function(t,e,i){"use strict";function s(t){return String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0")}e.a=s},304:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(305),r=i(332),a=i(333),o=i(335),n=i(336),h=i(337);setTimeout(function(){var t=window.innerHeight;document.body.clientHeight>t&&(document.body.style.height=t+"px",document.documentElement.style.height=t+"px");var e=document.querySelector(".js-game-container"),i=new Phaser.Game({width:e.clientWidth,height:e.clientHeight,parent:e,antialias:!0,renderer:Phaser.CANVAS});i.state.add("Boot",s.a),i.state.add("Loading",r.a),i.state.add("StartMenu",a.a),i.state.add("Help",o.a),i.state.add("Controls",n.a),i.state.add("Game",h.a),i.state.start("Boot")},50),document.body.style.backgroundImage="url("+i(349)+")"},305:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(115),a=i(330),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(){s(this,t)}return o(t,[{key:"init",value:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.mz={}}},{key:"create",value:function(){this.game.mz.i18n=new a.a({game:this.game}),this.state.onStateChange.add(this.handleStateChange,this),this.state.start("Loading",!0,!1,{assets:[["pack","initial",null,r.a],["pack","help"+(Phaser.Device.desktop?"Desktop":"Touch"),null,r.a]],nextState:["StartMenu"]})}},{key:"handleStateChange",value:function(){this.game.mz.i18n.clear()}}]),t}();e.a=n},306:function(t,e,i){t.exports=i.p+"assets/66dd3dd498c059b331146e5fe01f17dd.png"},307:function(t,e,i){t.exports=i.p+"assets/3e736cadcb61ec5e4f210df6e7bedd19.png"},308:function(t,e,i){t.exports=i.p+"assets/0a98a949b4886079723975216652cf49.png"},309:function(t,e,i){t.exports=i.p+"assets/c96144591ab8112e33935164269d6683.png"},310:function(t,e,i){t.exports=i.p+"assets/4190e618de11fbf3ae3d41873529b2e0.png"},311:function(t,e,i){t.exports=i.p+"assets/3eb6c3176371a0f3cc4fc69f68d0daea.png"},312:function(t,e,i){t.exports=i.p+"assets/fde6591e1dde24e589cfc497a07e708c.png"},313:function(t,e,i){t.exports=i.p+"assets/784a4a24da47767dec8d65b727fc8383.png"},314:function(t,e,i){t.exports=i.p+"assets/414510c3df8e81d30baba58bc049457c.png"},315:function(t,e,i){t.exports=i.p+"assets/e2ca73497a9d43a9891bdd004f7842b5.png"},316:function(t,e,i){t.exports=i.p+"assets/31269e05cd13ab095ae3bbb217d2f567.mp3"},317:function(t,e,i){t.exports=i.p+"assets/0cb89b881decdf87d1ccaba4ae7aaffb.mp3"},318:function(t,e,i){t.exports=i.p+"assets/dca004f04dec60da50cca8fecc4161f2.mp3"},319:function(t,e,i){t.exports=i.p+"assets/3745bf01cd4446437f37de7991ad805b.mp3"},320:function(t,e,i){t.exports=i.p+"assets/52b53826ba253bf501d879893845b5f4.mp3"},321:function(t,e,i){t.exports=i.p+"assets/15a327358f08be2e673ef27c2e5dcaa1.mp3"},322:function(t,e,i){t.exports=i.p+"assets/05b4ea2cf7bcddf26622cdaafb40b881.mp3"},323:function(t,e,i){t.exports=i.p+"assets/b2187268a6f521f79c03adf9bedcf458.mp3"},324:function(t,e,i){t.exports=i.p+"assets/dd570435d42a0e42441e1fc12af0f4fa.mp3"},325:function(t,e,i){t.exports=i.p+"assets/d98ae72532ed2e0fe2b7596a57c1cbac.png"},326:function(t,e,i){t.exports=i.p+"assets/e8369a8e936a5b0fabd5b1b42fed03d5.png"},327:function(t,e,i){t.exports=i.p+"assets/733d7ab8b793f60f4c77b9d837fa3693.png"},328:function(t,e,i){t.exports=i.p+"assets/d0797776e88d180a0467e06d6899a8ae.png"},329:function(t,e,i){t.exports=i.p+"assets/5fee96579fcfd0ddcb7e4d454cf0be76.png"},330:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(331),a=i(8),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(e){var i=e.game;s(this,t),this.game=i,this.textObjects=[],this.currentLang=navigator.language===a.N?a.N:a.M,this.translations=r.a}return o(t,[{key:"setLang",value:function(t){var e=this;this.currentLang=t,this.textObjects.forEach(function(t){var i=t.inst,s=t.text;i.setText(e.getTranslation(s))})}},{key:"createText",value:function(t,e,i,s){var r=this.game.add.text(t,e,this.getTranslation(i),s);return this.textObjects.push({inst:r,text:i}),r}},{key:"getTranslation",value:function(t){return this.translations[t][this.currentLang]}},{key:"clear",value:function(){this.textObjects=[]}}]),t}();e.a=n},331:function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r,a=i(8);e.a=(r={},s(r,a.s,{en:"Peaceful protest",ru:"Мирная акция протеста"}),s(r,a.A,{en:"> Level 01",ru:"> Уровень 01"}),s(r,a.B,{en:"> Level 02",ru:"> Уровень 02"}),s(r,a.z,{en:"How to play?",ru:"Как играть?"}),s(r,a.y,{en:"Controls",ru:"Управление"}),s(r,a.x,{en:"<   Back",ru:"<   Назад"}),s(r,a.l,{en:"move around",ru:"двигаться"}),s(r,a.n,{en:"run",ru:"бегать"}),s(r,a.m,{en:"show poster",ru:"показать плакат"}),s(r,a.w,{en:"Fill the protest scale before your time runs out",ru:"Заполните шкалу протеста на 100%, пока не вышло время"}),s(r,a.u,{en:"Show your poster to people around you to cheer them up",ru:"Показывайте плакат другим людям, чтобы поднять их настроение"}),s(r,a.t,{en:"Show your poster to journalists for several seconds to call out for more people",ru:"Показывайте плакат журналистам несколько секунд, чтобы позвать больше людей"}),s(r,a.v,{en:"Cops will chase you and others for showing posters",ru:"Полицейские вас арестуют, если поймают с плакатом"}),s(r,a.J,{en:"Protest meter",ru:"Шкала протеста"}),s(r,a.H,{en:"Loading",ru:"Загрузка"}),s(r,a.I,{en:"Pause",ru:"Пауза"}),s(r,a.r,{en:"You did it!",ru:"Митинг удался!"}),s(r,a.o,{en:"They got you, pal",ru:"Суши сухари, дружище"}),s(r,a.q,{en:"Time is out!",ru:"Время вышло!"}),s(r,a.p,{en:"You failed :(",ru:"Ты слил протест :("}),s(r,a.F,{en:"Your time",ru:"Время"}),s(r,a.G,{en:"Total protesters",ru:"Всего протестующих"}),s(r,a.C,{en:"Active",ru:"Осталось на митинге"}),s(r,a.D,{en:"Arrested",ru:"Арестовано"}),s(r,a.E,{en:"Left home",ru:"Ушло домой"}),r)},332:function(t,e,i){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t){return Array.isArray(t)?t:Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(8),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),h=function(){function t(){a(this,t)}return n(t,[{key:"init",value:function(t){this.mz={config:t,objects:{textProgress:null}}}},{key:"preload",value:function(){var t=this;this.game.stage.backgroundColor="#000",this.mz.config.assets.forEach(function(e){var i,a,o,n=r(e),h=n[0],l=n.slice(1);switch(h){case"pack":(i=t.load).pack.apply(i,s(l));break;case"spritesheet":(a=t.load).spritesheet.apply(a,s(l));break;case"image":(o=t.load).image.apply(o,s(l))}}),this.mz.objects.textLoading=this.game.add.text(this.game.world.centerX-5,this.game.world.centerY,this.game.mz.i18n.getTranslation(o.H),{font:"26px Arial",fill:"#fff"}),this.mz.objects.textLoading.anchor.set(1,.5),this.mz.objects.textProgress=this.game.add.text(this.game.world.centerX+5,this.game.world.centerY,"0 %",{font:"26px Arial",fill:"#fff"}),this.mz.objects.textProgress.anchor.set(0,.5)}},{key:"loadUpdate",value:function(){this.mz.objects.textProgress.setText(this.game.load.progress+" %")}},{key:"create",value:function(){var t;(t=this.state).start.apply(t,s(this.mz.config.nextState))}}]),t}();e.a=h},333:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(334),a=i(115),o=i(8),n=function(){function t(t,e){var i=[],s=!0,r=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(s=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){r=!0,a=t}finally{try{!s&&n.return&&n.return()}finally{if(r)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=function(){function t(){s(this,t)}return h(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000"}},{key:"create",value:function(){var t=this;this.game.world.resize(this.game.width,this.game.height),this.title=this.game.mz.i18n.createText(this.game.width/2,this.game.height/6,o.s,{fill:"#fff"}),this.title.anchor.set(.5);var e=this.game.height/3,i=Math.min(this.game.height/7,70);this.menu=[[o.A,this.handleClickPlay.bind(this,"level1")],[o.B,this.handleClickPlay.bind(this,"level2")],[o.z,this.handleClickHelp.bind(this)],[o.y,this.handleClickControls.bind(this)]].map(function(s,r){var a=n(s,2),o=a[0],h=a[1];return[t.game.mz.i18n.createText(40,r*i+e,o,{font:"22px Arial",fill:"#fff"}),h]}),this.langButton=this.game.add.button(this.game.world.width-10,0,"langButtons",this.handleClickLang.bind(this)),this.langButton.anchor.set(1,0),this.game.input.onDown.add(this.handleClickMenu,this)}},{key:"update",value:function(){this.langButton.frame=this.game.mz.i18n.currentLang===o.N?1:0}},{key:"handleClickPlay",value:function(t){this.state.start("Loading",!0,!1,{assets:[["pack","levelCommon",null,a.a],["pack",t,null,a.a]],nextState:["Game",!0,!1,r.a[t]]})}},{key:"handleClickLang",value:function(){this.game.mz.i18n.setLang(this.game.mz.i18n.currentLang===o.N?o.M:o.N)}},{key:"handleClickMenu",value:function(){var t=this;this.menu.some(function(e){var i=n(e,2),s=i[0],r=i[1];if(s.getBounds().contains(t.game.input.x,t.game.input.y))return t.game.input.onDown.remove(t.handleClickMenu,t),r(),!0})}},{key:"handleClickHelp",value:function(){this.state.start("Help",!0,!1)}},{key:"handleClickControls",value:function(){this.state.start("Controls",!0,!1)}}]),t}();e.a=l},334:function(t,e,i){"use strict";e.a={level1:{id:"level1",worldWidth:600,worldHeight:600,duration:180,winningThreshold:75,cops:{count:[[60,0],[85,1],[100,2]],speed:{value:50,running:1.7},fov:{distance:150,angle:100}},press:{count:1,speed:{value:50},fov:{distance:150,angle:100},duration:5},protesters:{count:{start:10,max:30,add:8},speed:{value:60},mood:.3,moodUp:.001,moodDown:1e-4,poster:{drop:.3,alive:20}},player:{speed:{value:100,withPoster:.6,running:1.5},radius:120,stamina:100,staminaCooldown:5,powerUp:.1,powerDown:.01}},level2:{id:"level2",worldWidth:800,worldHeight:800,duration:240,winningThreshold:75,cops:{count:[[40,1],[50,2],[60,3],[90,4],[100,5]],speed:{value:60,running:1.8},fov:{distance:150,angle:120}},swat:{count:5,speed:{value:200},frequency:15e3,scoreThreshold:60},press:{count:5,speed:{value:50},fov:{distance:100,angle:100},duration:5},protesters:{count:{start:20,max:60,add:10},max:60,speed:{value:60},mood:.25,moodUp:.002,moodDown:1e-4,poster:{drop:.12,alive:20}},player:{speed:{value:100,withPoster:.6,running:1.5},radius:120,stamina:200,staminaCooldown:5,powerUp:.1,powerDown:.01}}}},335:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(){s(this,t)}return a(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000"}},{key:"create",value:function(){var t=this,e=this.game.width/15;this.back=this.game.add.text(e,this.game.height/15,this.game.mz.i18n.getTranslation(r.x),{fill:"#fff"});var i=this.game.add.group(),s=0,a=this.game.height/30,o=Math.min(22,Math.round(this.game.height/19));[r.w,r.u,r.t,r.v].forEach(function(r,n){var h=t.game.add.text(e,s,n+1+". "+t.game.mz.i18n.getTranslation(r)+".",{font:o+"px Arial",fill:"#fff",wordWrap:!0,wordWrapWidth:t.game.width-2*e});s+=h.height+a,i.add(h)}),i.y=(this.game.height+this.back.bottom-s+a)/2,this.game.input.onDown.add(this.handleClickBack,this)}},{key:"handleClickBack",value:function(){if(this.back.getBounds().contains(this.game.input.x,this.game.input.y))return this.game.input.onDown.remove(this.handleClickBack,this),this.state.start("StartMenu",!0,!1),!0}}]),t}();e.a=o},336:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=function(){function t(t,e){var i=[],s=!0,r=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(s=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){r=!0,a=t}finally{try{!s&&n.return&&n.return()}finally{if(r)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(){s(this,t)}return o(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000"}},{key:"create",value:function(){var t=this;this.back=this.game.add.text(40,this.game.height/15,this.game.mz.i18n.getTranslation(r.x),{fill:"#fff"});var e=this.game.height/3.4,i=Math.min(100,this.game.height/3.8);[["Move",r.l],["Run",r.n],["Poster",r.m]].forEach(function(s,r){var o=a(s,2),n=o[0],h=o[1];t.game.add.sprite(t.game.width/4,r*i+e,"help"+n).anchor.set(.5),t.game.add.text(t.game.width/2,r*i+e,t.game.mz.i18n.getTranslation(h),{font:"20px Arial",fill:"#fff"}).anchor.set(0,.5)}),this.game.input.onDown.add(this.handleClickBack,this)}},{key:"handleClickBack",value:function(){if(this.back.getBounds().contains(this.game.input.x,this.game.input.y))return this.game.input.onDown.remove(this.handleClickBack,this),this.state.start("StartMenu",!0,!1),!0}}]),t}();e.a=n},337:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(338),a=i(339),o=i(340),n=i(341),h=i(342),l=i(343),u=i(344),p=i(345),d=i(347),c=i(348),m=i(8),g=i(128),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},y=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),v=function(){function t(){s(this,t)}return y(t,[{key:"init",value:function(t){this.mz={level:t,gameEnded:!1,score:100*(.5*t.protesters.mood+.5*t.protesters.count.start/t.protesters.count.max),timePassed:0,protesters:{alive:0,arrested:0,revived:0,left:0,toRevive:t.protesters.count.start,meanMood:t.protesters.mood},cops:{alive:0},postersToRevive:[],events:{keys:{},fieldClickHandler:null},timers:{swat:null},objects:{player:null,swat:null,shield:null,bgTile:null,interface:null,audio:{},pauseMenu:null,endMenu:null},arrays:{protesters:[],cops:[],press:[],borders:[],droppedPosters:[]},groups:{actors:null,cars:null,droppedPosters:null,copsFOV:null,pressFOV:null,playerFOV:null}}}},{key:"create",value:function(){var t=this;this.game.stage.backgroundColor="#ccc",this.game.world.resize(this.mz.level.worldWidth,this.mz.level.worldHeight),this.mz.objects.bgTile=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"ground"),this.mz.objects.bgTile.fixedToCamera=!0,this.mz.objects.audio.theme=this.game.add.audio("theme"),this.mz.objects.audio.theme.loopFull(.1),this.mz.objects.audio.audioPunch=[this.game.add.audio("punch01"),this.game.add.audio("punch02")],this.mz.objects.audio.random=[this.game.add.audio("croud")],this.mz.objects.audio.applause=this.game.add.audio("applause"),this.mz.objects.audio.boo=this.game.add.audio("boo"),this.mz.objects.audio.pick=this.game.add.audio("pick"),this.mz.groups.playerFOV=this.game.add.group(),this.mz.groups.pressFOV=this.game.add.group(),this.mz.groups.copsFOV=this.game.add.group(),this.mz.groups.droppedPosters=this.game.add.group(),this.mz.groups.cars=this.game.add.group();for(var e=0;e<this.game.world.width;e+=300){var i=this.game.add.sprite(e,120,"auto");i.anchor.set(0,1),this.mz.groups.cars.add(i)}this.mz.groups.actors=this.game.add.group(),this.mz.objects.player=new r.a(f({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY,fovGroup:this.mz.groups.playerFOV},this.mz.level.player,{onDropPoster:this.handleDropPoster.bind(this)})),this.game.camera.follow(this.mz.objects.player.sprite),this.mz.groups.actors.add(this.mz.objects.player.sprite);for(var s=0;s<this.game.world.width;s+=100){var a=Math.max(0,50-this.mz.objects.player.sprite.height),o=this.game.add.sprite(s,m.i.top-25,"border",0,this.mz.groups.actors);o.anchor.set(0,.5),this.game.physics.arcade.enable(o),o.body.setSize(o.width,a),o.body.immovable=!0,this.mz.arrays.borders.push(o)}this.createCops(),this.mz.level.swat&&(this.mz.objects.swat=new h.a(f({game:this.game},this.mz.level.swat,{group:this.mz.groups.actors})),this.mz.timers.swat=this.game.time.create(!1)),this.mz.objects.shield=new l.a({game:this.game,speed:{value:300}});for(var u=this.handleFinishShooting.bind(this),c=0;c<this.mz.level.press.count;c++){var g=new n.a(f({game:this.game},this.getRandomCoordinates(),{fov:{group:this.mz.groups.pressFOV,distance:this.mz.level.press.fov.distance,angle:this.mz.level.press.fov.angle},speed:this.mz.level.press.speed,shootingDuration:this.mz.level.press.duration,cooldownDuration:this.mz.level.press.duration*this.mz.level.press.count*2,onFinishShooting:u,spriteName:"journalist"+c}));this.mz.arrays.press.push(g.sprite),this.mz.groups.actors.add(g.sprite),g.setMode(m.L)}this.createProtesters(),this.mz.objects.interface=new p.a({game:this.game,onTogglePoster:function(){t.mz.objects.player.togglePoster()}});for(var y=0;y<this.game.world.width;y+=100){var v=Math.max(0,50-this.mz.objects.player.sprite.height),b=this.game.add.sprite(y,this.game.world.height-25,"border",0,this.mz.groups.actors);b.anchor.set(0,.5),this.game.physics.arcade.enable(b),b.body.setSize(b.width,v,0,b.height-v),b.body.immovable=!0,this.mz.arrays.borders.push(b)}this.mz.objects.timer=this.game.time.create(),this.mz.objects.timer.loop(Phaser.Timer.SECOND,this.updateTimer,this),this.mz.objects.timer.start(),this.mz.objects.pauseMenu=new d.a({game:this.game});var w=this.game.add.sprite(0,0);w.fixedToCamera=!0,w.scale.set(this.game.width,this.game.height),w.inputEnabled=!0,w.input.priorityID=1,w.events.onInputDown.add(this.handleTap,this),this.mz.events.fieldClickHandler=w,this.game.onPause.add(this.handlePause,this),this.game.onResume.add(this.handlePause,this),this.game.input.onDown.add(this.handleUnpause,this),this.mz.events.keys.esc=this.game.input.keyboard.addKey(Phaser.Keyboard.ESC)}},{key:"update",value:function(){var t=this;this.mz.objects.bgTile.tilePosition.set(-this.game.camera.x,-this.game.camera.y),this.mz.gameEnded||this.playRandomSound(),this.mz.objects.player.update();var e=this.mz.protesters.meanMood;this.mz.score=0,this.mz.protesters.meanMood=0,this.mz.protesters.alive=0;for(var i=0;i<this.mz.arrays.protesters.length;i++){var s=this.mz.arrays.protesters[i];if(s.alive)s.mz.update(),s.mz.toggleCheering(!this.mz.gameEnded&&this.mz.objects.player.showPoster&&this.getDistanceSq(s,this.mz.objects.player.sprite)<=this.mz.objects.player.radius.actualSq),this.mz.protesters.alive++,this.mz.protesters.meanMood+=s.mz.mood;else if(0!==this.mz.protesters.toRevive){var r=this.game.math.clamp(e,this.mz.level.protesters.mood,(this.mz.level.winningThreshold-1)/100);this.reviveProtester({sprite:s,mood:r}),this.mz.protesters.alive++,this.mz.protesters.meanMood+=r}}if(this.mz.protesters.toRevive=0,this.mz.protesters.meanMood=0!==this.mz.protesters.alive?this.mz.protesters.meanMood/this.mz.protesters.alive:0,this.mz.score=100*this.game.math.clamp(100*(.5*this.mz.protesters.alive/this.mz.level.protesters.count.max+.5*this.mz.protesters.meanMood)/this.mz.level.winningThreshold,0,1),this.mz.gameEnded||this.mz.objects.interface.update({score:this.mz.score,protestersAlive:this.mz.protesters.alive,protestersTotal:this.mz.level.protesters.count.max,meanMood:this.mz.protesters.meanMood}),this.mz.arrays.press.forEach(function(e){var i=e.mz,s=null;!t.mz.gameEnded&&i.FOV.isActive&&t.mz.objects.player.showPoster&&i.FOV.containsPoint(t.mz.objects.player.sprite.body.center)&&(s=t.mz.objects.player.sprite),s?i.setMode(m.K,{target:s}):i.mode!==m.L&&i.setMode(m.L),i.update()}),this.mz.objects.swat&&((this.mz.score>=this.mz.level.swat.scoreThreshold||this.mz.gameEnded)&&this.mz.objects.swat.mode===m.T&&!this.mz.timers.swat.running?(this.mz.timers.swat.add(this.mz.level.swat.frequency,this.launchSWAT,this),this.mz.timers.swat.start()):this.mz.timers.swat.running&&this.mz.score<this.mz.level.swat.scoreThreshold&&this.mz.timers.swat.stop(!0),this.mz.objects.swat.update()),this.mz.objects.shield.update(),this.mz.cops.alive<this.mz.arrays.cops.length){var a=this.getCopsRequiredNumber();a>this.mz.cops.alive&&(this.reviveCops(a-this.mz.cops.alive),this.mz.cops.alive=a)}for(var o=0;o<this.mz.cops.alive;o++){var n=this.mz.arrays.cops[o],h=n.mz;if(h.mode!==m.a&&h.mode!==m.b){h.attractionPoint=f({},this.mz.objects.player.sprite.body.center);var l=0;this.mz.objects.player.showPoster&&(l+=.2,this.mz.arrays.press.forEach(function(t){t.mz.mode===m.K&&(l+=.4)})),h.attractionStrength=Math.min(1,l*this.mz.objects.player.power);for(var u=null,p=1/0,d=0;d<=this.mz.arrays.protesters.length;d++){var c=d===this.mz.arrays.protesters.length?this.mz.objects.player:this.mz.arrays.protesters[d].mz;if(c.sprite.alive&&c.mode!==m.O&&h.FOV.containsPoint(c.sprite.body.center)&&(c.sprite===h.target||c.showPoster)){var g=this.getDistanceSq(n.body.center,c.sprite.body.center);c.sprite===h.target&&(g*=.75),g<p&&(u=c.sprite,p=g)}}u?h.setMode(m.c,{target:u}):h.mode!==m.d&&h.setMode(m.d)}h.update()}for(var y=0;y<=this.mz.arrays.protesters.length;y++){var v=y===this.mz.arrays.protesters.length?this.mz.objects.player.sprite:this.mz.arrays.protesters[y];if(v.alive&&v.mz.mode!==m.O){for(var b=v.getBounds(),w=0;w<this.mz.arrays.cops.length;w++){var k=this.mz.arrays.cops[w];k.alive&&k.mz.target===v&&Phaser.Rectangle.intersects(b,k.getBounds())&&this.proceedToJail(v,k)}if(this.mz.objects.swat)for(var z=0;z<this.mz.objects.swat.sprites.length;z++){var T=this.mz.objects.swat.sprites[z];0!==T.children.length||T.x<=0||T.x>=this.game.world.width||!Phaser.Rectangle.intersects(b,T.getBounds())||this.arrest(v,T)}this.mz.gameEnded&&this.game.physics.arcade.collide(v,this.mz.objects.shield.sprite,function(e){e.body.collideWorldBounds=!1,1===e.health&&t.beatUpProtester(e),e.mz.dropPosterRnd()})}}if(this.mz.objects.player.mode!==m.O&&!this.mz.gameEnded)for(var x=0;x<this.mz.arrays.droppedPosters.length;x++){var P=this.mz.arrays.droppedPosters[x];P.sprite.alive&&(Phaser.Rectangle.intersects(P.sprite.getBounds(),this.mz.objects.player.sprite.getBounds())&&(this.mz.objects.audio.pick.play("",0,.25),this.mz.objects.player.powerUp(),P.kill()))}this.game.physics.arcade.collide(this.mz.objects.player.sprite,this.mz.arrays.borders),this.mz.arrays.droppedPosters.forEach(function(t){t.sprite.alive&&t.update()}),this.mz.postersToRevive.forEach(this.createPoster,this),this.mz.postersToRevive=[],this.mz.groups.actors.sort("y",Phaser.Group.SORT_ASCENDING),this.mz.gameEnded||this.checkWin(),this.mz.events.keys.esc.justUp&&(this.game.paused=!this.game.paused)}},{key:"render",value:function(){}},{key:"handleTap",value:function(t,e){var i={x:e.x+this.game.camera.x,y:e.y+this.game.camera.y},s=this.mz.objects.player;s.resetClickSpeed(),s.moveTo(f({},i,{callback:function(){s.resetClickSpeed(!0)}}))}},{key:"handleProtesterLeft",value:function(){this.mz.protesters.left++}},{key:"handleDropPoster",value:function(t){this.mz.postersToRevive.push(t)}},{key:"handleFinishShooting",value:function(){this.mz.protesters.toRevive+=this.mz.level.protesters.count.add}},{key:"handlePause",value:function(){this.game.paused?this.mz.objects.pauseMenu.revive():this.mz.objects.pauseMenu.kill()}},{key:"handleUnpause",value:function(){this.game.paused&&this.mz.objects.pauseMenu.replayButton.getBounds().contains(this.game.input.x,this.game.input.y)&&(this.game.paused=!1)}},{key:"updateTimer",value:function(){this.mz.timePassed++,this.mz.objects.interface.updateTimer(g.a(this.mz.level.duration-this.mz.timePassed))}},{key:"createCops",value:function(){var t=this.mz.level.cops.count[this.mz.level.cops.count.length-1][1];this.mz.cops.alive=this.getCopsRequiredNumber();for(var e=0;e<t;e++){var i=new o.a(f({game:this.game},this.getRandomCoordinates(),{alive:e<this.mz.cops.alive,fov:{group:this.mz.groups.copsFOV,distance:this.mz.level.cops.fov.distance,angle:this.mz.level.cops.fov.angle},speed:this.mz.level.cops.speed,spriteName:"cop"+e}));this.mz.arrays.cops.push(i.sprite),this.mz.groups.actors.add(i.sprite),e<this.mz.cops.alive&&i.setMode(m.d)}}},{key:"reviveCops",value:function(t){for(var e=0;e<t;e++){var i=e+this.mz.cops.alive;this.mz.arrays.cops[i].mz.revive(Boolean(i%2))}}},{key:"getCopsRequiredNumber",value:function(){for(var t=0,e=0;e<this.mz.level.cops.count.length;e++)if(this.mz.score<=this.mz.level.cops.count[e][0]){t=this.mz.level.cops.count[e][1];break}return t}},{key:"createProtesters",value:function(){for(var t=this.mz.level.protesters.count.max,e=this.handleDropPoster.bind(this),i=this.handleProtesterLeft.bind(this),s=0;s<t;s++){var r=new a.a(f({game:this.game},this.getRandomCoordinates(),{group:this.mz.groups.actors,speed:this.mz.level.protesters.speed,spriteKey:"protester"+this.game.rnd.between(1,3),spriteName:"protester"+s,mood:this.mz.level.protesters.mood,moodUp:this.mz.level.protesters.moodUp,moodDown:this.mz.level.protesters.moodDown,dropPoster:this.mz.level.protesters.poster.drop,onLeft:i,onDropPoster:e}));this.mz.arrays.protesters.push(r.sprite)}}},{key:"reviveProtester",value:function(t){var e=t.sprite,i=t.mood,s=this.game.rnd.between(0,100);e.mz.revive({x:0===this.game.rnd.between(0,1)?-100-s:this.game.world.width+100+s,y:this.getRandomCoordinateY(),nextCoords:this.getRandomCoordinates(),mood:i}),this.mz.protesters.toRevive--,this.mz.protesters.revived++}},{key:"beatUpProtester",value:function(t){t.damage(.1),this.playRandomPunch()}},{key:"createPoster",value:function(t){for(var e=!1,i=0;i<this.mz.arrays.droppedPosters.length;i++){var s=this.mz.arrays.droppedPosters[i];if(!s.sprite.alive){s.revive(t),e=!0;break}}e||this.mz.arrays.droppedPosters.push(new u.a(f({game:this.game,group:this.mz.groups.droppedPosters},t,{alive:this.mz.level.protesters.poster.alive})))}},{key:"proceedToJail",value:function(t,e){var i=this,s=null,r=1/0;this.mz.groups.cars.forEach(function(t){var a={x:(t.right+t.left)/2,y:t.bottom+20},o=i.getDistanceSq(e,a);o<r&&(s=a,r=o)}),this.arrest(t,e),e.mz.setMode(m.a,{jailCoords:s})}},{key:"arrest",value:function(t,e){this.beatUpProtester(t),e.addChild(t),"player"===t.name&&this.game.camera.follow(e),t.mz.setMode(m.O,{x:(0===e.body.velocity.x?this.game.rnd.sign():-Math.sign(e.body.velocity.x))*t.body.halfWidth,y:t.body.halfHeight}),"player"!==t.name&&this.mz.protesters.arrested++}},{key:"launchSWAT",value:function(){this.mz.timers.swat.stop(!0),this.mz.objects.audio.boo.play();var t=0===this.game.rnd.between(0,1)?"ltor":"rtol";this.mz.objects.swat.setMode(m.U,{x:"ltor"===t?-100:this.game.world.width+100,y:this.getRandomCoordinateY(),target:{x:"ltor"===t?this.game.world.width+100:-100,y:this.getRandomCoordinateY()}})}},{key:"launchShield",value:function(){this.mz.objects.shield.setMode(m.R,{y:this.game.height/2+this.game.camera.y})}},{key:"checkWin",value:function(){this.mz.timePassed>this.mz.level.duration?this.endGame(m.g):0===this.mz.score?this.endGame(m.f):100===this.mz.score?this.endGame(m.h):this.mz.objects.player.mode!==m.O&&this.mz.objects.player.sprite.alive||this.endGame(m.e)}},{key:"endGame",value:function(t){if(this.mz.gameEnded=!0,this.mz.objects.audio.theme.fadeOut(2e3),this.mz.objects.endMenu=new c.a({game:this.game,mode:t,score:this.mz.objects.interface.score.group,stats:{time:this.mz.timePassed,alive:this.mz.protesters.alive,arrested:this.mz.protesters.arrested,revived:this.mz.protesters.revived,left:this.mz.protesters.left}}),this.game.camera.unfollow(),this.mz.objects.interface.kill(),this.mz.objects.timer.stop(),this.mz.events.fieldClickHandler.kill(),this.game.onPause.removeAll(),this.game.onResume.removeAll(),this.mz.objects.player.freeze(),this.game.input.keyboard.removeKey(Phaser.Keyboard.ESC),this.game.input.onDown.remove(this.handleUnpause,this),t===m.h)this.mz.objects.audio.applause.play("",0,.25),this.mz.arrays.protesters.forEach(function(t){t.mz.moodUp(1)});else switch(this.mz.objects.audio.boo.play(),t){case m.g:this.mz.arrays.protesters.forEach(function(t){t.mz.moodDown(1)}),this.launchShield();break;case m.f:this.launchShield();break;case m.e:}}},{key:"playRandomSound",value:function(){0===this.game.rnd.between(0,1/this.mz.objects.audio.random.length*600)&&this.game.rnd.pick(this.mz.objects.audio.random).play("",0,.25)}},{key:"playRandomPunch",value:function(){this.game.rnd.pick(this.mz.objects.audio.audioPunch).play("",0,.25)}},{key:"getDistanceSq",value:function(t,e){return this.game.math.distanceSq(t.x,t.y,e.x,e.y)}},{key:"getRandomCoordinates",value:function(){return{x:this.getRandomCoordinateX(),y:this.getRandomCoordinateY()}}},{key:"getRandomCoordinateX",value:function(){return this.game.math.clamp(this.game.world.randomX,m.i.left,this.game.world.width-m.i.right)}},{key:"getRandomCoordinateY",value:function(){return this.game.math.clamp(this.game.world.randomY,m.i.top,this.game.world.height-m.i.bottom)}}]),t}();e.a=v},338:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=i(126),n=i(8),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=function t(e,i,s){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(s)},u=function(t){function e(t){var i=t.game,a=t.x,o=t.y,n=t.speed,h=t.fovGroup,l=t.radius,u=t.cheering,p=t.stamina,d=t.staminaCooldown,c=t.powerUp,m=t.powerDown,g=t.onDropPoster;s(this,e);var f=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:i,x:a,y:o,speed:n,spriteKey:"player",spriteName:"player",onDropPoster:g}));return f.sprite.inputEnabled=!0,f.sprite.input.priorityID=1,f.sprite.body.collideWorldBounds=!0,f.power=1,f.powerUpValue=c,f.powerDownValue=m,f.powerTimer=f.game.time.create(!1),f.powerTimer.loop(2e3,f.powerDown,f),f.powerTimer.start(),f.cheering=u,f.stamina=p,f.maxStamina=p,f.cooldownTimer=f.game.time.create(!1),f.staminaCooldown=1e3*d,f.tapStartTimestamp=Date.now(),f.tapDelta=1/0,f.progressBar=f.game.add.graphics(),f.sprite.addChild(f.progressBar),f.audioScream=f.game.add.audio("scream03"),f.showPoster=!1,f.isFrozen=!1,f.radius={initial:l,graphic:0,actual:0,actualSq:0,tween:{}},f.resetRadius(),f.circleGraphics=f.game.add.graphics(0,0),h.add(f.circleGraphics),f.game.onResume.add(f.handleGameResume,f),f.keys={up:f.game.input.keyboard.addKey(Phaser.Keyboard.UP),down:f.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),left:f.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),right:f.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),space:f.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),shift:f.game.input.keyboard.addKey(Phaser.Keyboard.SHIFT)},f}return a(e,t),h(e,[{key:"update",value:function(){var t=this;if(this.resetRadius(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.circleGraphics.clear(),this.mode===n.O||this.isFrozen)return void this.updateProgressBar(0);this.circleGraphics.lineStyle(1,3407667,1),this.circleGraphics.drawCircle(this.sprite.x,this.sprite.y,2*this.radius.graphic);var i=this.speed.value,s=this.keys.up.isDown||this.keys.down.isDown||this.keys.left.isDown||this.keys.right.isDown;if(this.cooldownTimer.running?this.stamina=this.maxStamina*this.cooldownTimer.ms/this.staminaCooldown:s&&this.keys.shift.isDown||this.tapDelta<200?this.stamina>0?(this.stamina-=1,i*=this.speed.running):(this.cooldownTimer.add(this.staminaCooldown,function(){t.cooldownTimer.stop(!0)}),this.cooldownTimer.start()):this.stamina<this.maxStamina&&(this.stamina+=1),this.stamina<this.maxStamina?this.updateProgressBar(this.stamina/this.maxStamina,this.cooldownTimer.running?16711680:65280):this.updateProgressBar(0),this.showPoster&&(i*=this.speed.withPoster),this.setSpeed(i),s){this.moveTo(null);var r=[];this.keys.up.isDown&&r.push(-90),this.keys.down.isDown&&r.push(90),this.keys.left.isDown&&(this.keys.up.isDown?r.push(-180):r.push(180)),this.keys.right.isDown&&r.push(0),this.game.physics.arcade.velocityFromAngle(r.reduce(function(t,e){return e+t},0)/r.length,this.speed.current,this.sprite.body.velocity),this.resetClickSpeed(!0)}else(this.keys.up.justUp||this.keys.down.justUp||this.keys.left.justUp||this.keys.right.justUp)&&this.stop();this.keys.space.justDown&&this.togglePoster()}},{key:"handleGameResume",value:function(){this.moveTo(null)}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case n.O:this.togglePoster(!1),this.sprite.body.collideWorldBounds=!1,this.cooldownTimer.stop(!0)}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t,i)}},{key:"togglePoster",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.showPoster;t!==this.showPoster&&(t&&this.audioScream.play("",0,.1),this.showPoster=t)}},{key:"powerUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.powerUpValue;0!==t&&this.powerChange(t)}},{key:"powerDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.powerDownValue;Math.max(1,this.power-t)!==this.power&&this.powerChange(-t)}},{key:"powerChange",value:function(t){this.power+=t,this.posterSprite.scale.set(this.power)}},{key:"resetClickSpeed",value:function(t){if(t)this.tapDelta=1/0;else{var e=Date.now();this.tapDelta=e-this.tapStartTimestamp,this.tapStartTimestamp=e}}},{key:"resetRadius",value:function(){var t=this.showPoster?this.radius.initial:0;(t*=this.power)!==this.radius.actual&&(this.radius.tween.isRunning&&this.radius.tween.stop(),this.game.math.fuzzyEqual(t,this.radius.graphic,1)?this.radius.graphic=t:(this.radius.tween=this.game.add.tween(this.radius),this.radius.tween.to({graphic:t},500,Phaser.Easing.Exponential.Out),this.radius.tween.start()),this.radius.actual=t,this.radius.actualSq=Math.pow(this.radius.actual,2))}},{key:"freeze",value:function(){this.sprite.alive&&this.moveTo(null),this.isFrozen=!0}},{key:"kill",value:function(){this.game.onResume.removeAll(),this.powerTimer.stop(!0),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}}]),e}(o.a);e.a=u},339:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=i(126),n=i(8),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),u=function t(e,i,s){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(s)},p=function(t){function e(t){var i=t.game,a=t.x,o=t.y,n=t.group,h=t.speed,l=t.spriteKey,u=t.spriteName,p=t.mood,d=t.moodDown,c=t.moodUp,m=t.dropPoster,g=t.onLeft,f=t.onDropPoster;s(this,e);var y=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:i,x:a,y:o,speed:h,spriteKey:l,spriteName:u,onDropPoster:f}));return y.group=n,y.group.add(y.sprite),y.progressBar=y.game.add.graphics(),y.sprite.addChild(y.progressBar),y.leavingTimer=y.game.time.create(!1),y.mood=p,y.initialMood=p,y.moodUpValue=c,y.moodDownValue=d,y.dropPoster=m,y.isBeingCheeredUp=!1,y.onLeft=g,y.kill(),y}return a(e,t),l(e,[{key:"update",value:function(){if(0!==this.mood||this.leavingTimer.running||this.mode!==n.Q?this.mood>0&&this.leavingTimer.running&&this.leavingTimer.stop(!0):(this.leavingTimer.add(this.game.rnd.between(1e3,5e3),this.leave,this),this.leavingTimer.start()),this.mood>0&&this.mode===n.P&&this.setMode(n.Q),this.isBeingCheeredUp?(this.updateProgressBar(this.mood),this.moodUp(this.moodUpValue)):this.mood<.75&&(this.moodDown(this.moodDownValue),this.updateProgressBar(0)),this.showPoster=this.mode!==n.O&&this.mood>=.75,this.sprite.tint=16777215,this.mood>=.75){var t=(this.mood-.75)/.25*.25;this.sprite.tint=Phaser.Color.RGBArrayToHex([1-t,1,1-t])}else if(this.mood<=.25){var i=.25*(1-this.mood/.25);this.sprite.tint=Phaser.Color.RGBArrayToHex([1,1-i,1-i])}u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"handleLeft",value:function(){this.onLeft(),this.kill()}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case n.Q:this.mode===n.P&&this.moveTo(null);var s=i.coords;s?this.moveTo(h({},s,{callback:this.wander.bind(this)})):this.wander();break;case n.O:this.mode===n.Q&&this.stopWandering();break;case n.P:this.mode===n.Q&&this.stopWandering(),this.moveTo({x:this.sprite.x<this.game.world.width/2?-100:this.game.world.width+100,y:this.sprite.y,callback:this.handleLeft.bind(this)})}u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t,i)}},{key:"wander",value:function(){0===this.game.rnd.between(0,10)?this.moveTo(h({},this.getNextCoords(),{callback:this.wander.bind(this)})):(this.stayingTimer.stop(!0),this.stayingTimer.add(this.game.rnd.between(3e3,6e3),this.wander,this),this.stayingTimer.start())}},{key:"leave",value:function(){this.setMode(n.P),this.leavingTimer.stop(!0)}},{key:"toggleCheering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isBeingCheeredUp;t!==this.isBeingCheeredUp&&(this.isBeingCheeredUp=t)}},{key:"moodUp",value:function(t){this.mood=Math.min(this.mood+t,1)}},{key:"moodDown",value:function(t){this.mood=Math.max(this.mood-t,0)}},{key:"revive",value:function(t){var i=t.x,s=t.y,r=t.nextCoords,a=t.mood,o=void 0===a?this.initialMood:a;this.sprite.x=i,this.sprite.y=s,this.sprite.body.reset(i,s),this.posterSprite.revive(),this.mood=o,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revive",this).call(this),this.setMode(n.Q,{coords:r})}},{key:"kill",value:function(){this.group.add(this.sprite),this.stopWandering(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}}]),e}(o.a);e.a=p},340:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=i(83),n=i(127),h=i(8),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},u=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),p=function t(e,i,s){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(s)},d=function(t){function e(t){var i=t.game,a=t.x,o=void 0===a?0:a,h=t.y,l=void 0===h?0:h,u=t.alive,p=t.fov,d=t.speed,c=t.spriteName;s(this,e);var m=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:i,x:o,y:l,speed:d,spriteKey:"cop",spriteName:c}));return m.FOV=new n.a({game:m.game,radius:p.distance,angle:p.angle}),p.group.add(m.FOV.graphics),m.target=null,m.attractionPoint=null,m.attractionStrength=0,m.returnCoords=null,u||m.kill(),m}return a(e,t),u(e,[{key:"update",value:function(){var t=this.speed.value;this.mode!==h.c&&this.mode!==h.b||(t*=this.speed.running),this.setSpeed(t),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),this.FOV.update({x:this.sprite.x,y:this.sprite.y,angle:this.sprite.body.angle,mode:this.mode===h.c?h.j:h.k})}},{key:"setMode",value:function(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case h.d:var r=s.coords;this.mode===h.c?this.target=null:this.mode===h.a&&(this.target=null,this.returnCoords=null,this.FOV.revive()),r?this.moveTo(l({},r,{callback:this.wander.bind(this)})):this.wander();break;case h.c:var a=s.target;this.mode===h.d&&this.stopWandering(),this.target=a,this.moveTo(a);break;case h.a:var o=s.jailCoords;this.FOV.kill(),this.returnCoords={x:this.sprite.x,y:this.sprite.y},this.moveTo(l({},o,{callback:this.handleCovoyEnd.bind(this)}));break;case h.b:var n=s.coords;this.moveTo(n[0]),this.addMoveTarget(l({},n[1],{callback:function(){i.FOV.revive(),i.setMode(h.d)}}))}p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t)}},{key:"handleCovoyEnd",value:function(){for(var t=0;t<this.sprite.children.length;t++)this.sprite.getChildAt(t).mz.kill();this.setMode(h.d,{coords:this.returnCoords})}},{key:"wander",value:function(){0!==(this.attractionStrength>0?1:this.game.rnd.between(0,2))?this.moveTo(l({},this.getNextCoords(),{callback:this.wander.bind(this)})):(this.stayingTimer.stop(!0),this.stayingTimer.add(this.game.rnd.between(1e3,3e3),this.wander,this),this.stayingTimer.start())}},{key:"getNextCoords",value:function(){var t=void 0,i=this.game.rnd.frac();return(1===this.attractionStrength||this.attractionStrength>0&&i<=this.attractionStrength)&&(t={top:Math.min(this.sprite.y,this.attractionPoint.y),right:Math.max(this.sprite.x,this.attractionPoint.x),bottom:Math.max(this.sprite.y,this.attractionPoint.y),left:Math.min(this.sprite.x,this.attractionPoint.x)}),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getNextCoords",this).call(this,t)}},{key:"revive",value:function(t){var i=this.game.rnd.between(50,200),s=t?-i:this.game.world.width+i,r=110;this.sprite.x=s,this.sprite.y=r,this.sprite.body.reset(s,r);var a=100*this.game.rnd.between(1,Math.floor(this.game.world.width/100)-1);this.setMode(h.b,{coords:[{x:a,y:r},{x:a,y:r+this.sprite.height}]}),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revive",this).call(this)}},{key:"kill",value:function(){this.target=null,this.stopWandering(),this.FOV.kill(),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}}]),e}(o.a);e.a=d},341:function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=i(83),h=i(127),l=i(8),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},p=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),d=function t(e,i,s){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(s)},c=function(t){function e(t){var i,o=t.game,n=t.x,u=t.y,p=t.speed,d=t.fov,c=t.shootingDuration,m=t.cooldownDuration,g=t.onFinishShooting;r(this,e);var f=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{game:o,x:n,y:u,speed:p,spriteKey:"journalist"}));return f.FOV=new h.a({game:f.game,radius:d.distance,angle:d.angle,colors:(i={},s(i,l.k,14540253),s(i,l.j,16777215),i)}),d.group.add(f.FOV.graphics),f.progressBar=f.game.add.graphics(),f.sprite.addChild(f.progressBar),f.shootingTimer=f.game.time.create(!1),f.shootingDuration=1e3*c,f.cooldownTimer=f.game.time.create(!1),f.cooldownDuration=1e3*m,f.onFinishShooting=g,f.target=null,f}return o(e,t),p(e,[{key:"update",value:function(){this.mode===l.K&&this.turnTo(this.target),this.shootingTimer.running?this.updateProgressBar(this.shootingTimer.ms/this.shootingDuration):this.cooldownTimer.running?this.updateProgressBar(this.cooldownTimer.ms/this.cooldownDuration,16711680):this.updateProgressBar(0),this.FOV.update({x:this.sprite.x,y:this.sprite.y,angle:this.sprite.body.angle,mode:this.mode===l.K?l.j:l.k}),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"setMode",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case l.L:this.mode===l.K&&(this.target=null,this.shootingTimer.stop(!0)),this.wander();break;case l.K:var s=i.target;if(this.mode===l.K&&this.target===s)break;this.mode===l.L&&this.stopWandering(),this.target=s,this.shootingTimer.add(this.shootingDuration,this.shootingTimerCallback,this),this.shootingTimer.start()}d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setMode",this).call(this,t)}},{key:"wander",value:function(){0!==this.game.rnd.between(0,2)?this.moveTo(u({},this.getNextCoords(),{callback:this.wander.bind(this)})):(this.stayingTimer.stop(!0),this.stayingTimer.add(this.game.rnd.between(1e3,3e3),this.wander,this),this.stayingTimer.start())}},{key:"turnTo",value:function(t){var e=t.x,i=t.y;this.sprite.body.angle=this.game.math.angleBetweenPoints(this.sprite,{x:e,y:i})}},{key:"shootingTimerCallback",value:function(){this.onFinishShooting(),this.FOV.kill(),this.setMode(l.L),this.shootingTimer.stop(!0),this.cooldownTimer.add(this.cooldownDuration,this.cooldownTimerCallback,this),this.cooldownTimer.start()}},{key:"cooldownTimerCallback",value:function(){this.FOV.revive(),this.cooldownTimer.stop(!0)}},{key:"kill",value:function(){this.cooldownTimer.stop(!0),this.shootingTimer.stop(!0),this.stopWandering(),this.FOV.kill(),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"kill",this).call(this)}}]),e}(n.a);e.a=c},342:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(e){var i=e.game,o=e.count,n=e.speed,h=e.group;s(this,t),this.game=i,this.speed=a({current:n.value},n),this.mode=r.T,this.moveTarget=null,this.updateIndex=0,this.sprites=[];for(var l=0;l<o;l++){var u=this.game.add.sprite(-100,-100,"swat",0);u.anchor.set(.5),u.visible=!1,this.game.physics.arcade.enable(u),this.sprites.push(u),h.add(u)}}return o(t,[{key:"update",value:function(){if(this.mode===r.U){var t=this.sprites[this.sprites.length-1];if(this.game.math.fuzzyEqual(this.game.math.distanceSq(t.x,t.y,this.moveTarget.x,this.moveTarget.y),0,t.width))this.setMode(r.T);else{if(this.updateIndex%30==0){var e=this.sprites[0],i=this.game.math.angleBetweenPoints(e,this.moveTarget)+(0===this.updateIndex?1:-1)*this.game.rnd.realInRange(0,.4);this.game.physics.arcade.velocityFromRotation(i,this.speed.current,e.body.velocity)}for(var s=1;s<this.sprites.length;s++){var a=this.sprites[s],o=this.game.math.angleBetweenPoints(a,this.sprites[s-1]);this.game.physics.arcade.velocityFromRotation(o,this.speed.current,a.body.velocity)}59===this.updateIndex?this.updateIndex=0:this.updateIndex++}}}},{key:"setMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case r.T:if(this.mode===r.U){for(var i=0;i<this.sprites.length;i++){for(var s=0;s<this.sprites[i].children.length;s++)this.sprites[i].getChildAt(s).mz.kill();this.sprites[i].removeChildren(),this.sprites[i].visible=!1,this.sprites[i].body.stop()}this.updateIndex=0,this.moveTarget=null}break;case r.U:if(this.mode===r.T){var a=e.x,o=e.y,n=e.target;this.moveTarget=n;for(var h=this.moveTarget.x>a?-1:1,l=0;l<this.sprites.length;l++){var u=this.sprites[l];u.x=a+l*h*40,u.y=o,u.visible=!0}}}this.mode=t}}]),t}();e.a=n},343:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n={ltr:"ltr",rtl:"rtl"},h=function(){function t(e){var i=e.game,o=e.speed;s(this,t),this.game=i,this.speed=a({current:o.value},o),this.mode=r.S,this.sprite=this.game.add.sprite(2*this.game.world.width,this.game.world.height/2+this.game.camera.y,"shield"),this.sprite.anchor.set(.5),this.sprite.exist=!1,this.game.physics.arcade.enable(this.sprite),this.sprite.body.immovable=!0,this.direction=n.rtl,this.audio=this.game.add.audio("truck")}return o(t,[{key:"update",value:function(){this.mode===r.R&&(this.direction===n.ltr&&this.sprite.x>=this.game.world.width+this.sprite.width||this.direction===n.rtl&&this.sprite.x<=-this.sprite.width)&&this.setMode(r.S)}},{key:"setMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case r.S:this.mode===r.R&&(this.direction=this.direction===n.ltr?n.rtl:n.ltr,this.sprite.kill(),this.sprite.body.stop(),this.audio.stop());break;case r.R:if(this.mode===r.S){var i=e.y;this.sprite.x=this.direction===n.ltr?-this.game.world.width:2*this.game.world.width,this.sprite.y=i,this.sprite.body.velocity.x=this.speed.current*(this.direction===n.ltr?1:-1),this.sprite.scale.x=this.sprite.scale.y*(this.direction===n.ltr?-1:1),this.audio.loopFull(.25),this.game.camera.shake(.005,3e3)}}this.mode=t}}]),t}();e.a=h},344:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),a=function(){function t(e){var i=e.game,r=e.group,a=e.x,o=e.y,n=e.alive;s(this,t),this.game=i,this.aliveTime=1e3*n,this.sprite=this.game.add.sprite(a,o,"poster",0,r),this.sprite.anchor.set(.5),this.sprite.rotation=this.game.rnd.sign()*Math.PI/3,this.livingTimer=this.game.time.create(!1),this.dyingTimer=this.game.time.create(!1),this.launchLivingTimer()}return r(t,[{key:"update",value:function(){this.dyingTimer.running&&(this.sprite.alpha=Math.floor(this.dyingTimer.ms/400)%2)}},{key:"handleLivingTimer",value:function(){this.dyingTimer.add(this.aliveTime/4,this.kill,this),this.dyingTimer.start()}},{key:"launchLivingTimer",value:function(){this.livingTimer.add(3*this.aliveTime/4,this.handleLivingTimer,this),this.livingTimer.start()}},{key:"revive",value:function(t){this.sprite.x=t.x,this.sprite.y=t.y,this.sprite.alpha=1,this.launchLivingTimer(),this.sprite.revive()}},{key:"kill",value:function(){this.livingTimer.stop(!0),this.dyingTimer.stop(!0),this.sprite.kill()}}]),t}();e.a=a},345:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(346),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(e){var i=e.game,a=e.onTogglePoster;s(this,t),this.game=i,this.onTogglePoster=a,this.group=this.game.add.group(),this.group.fixedToCamera=!0,this.score=new r.a({game:this.game,x:this.game.width/2,y:this.game.height-20,width:Math.min(this.game.width/2,250)}),this.group.add(this.score.group),this.textTimer=this.game.add.text(this.game.width-20,20,"",{font:"25px Arial",fill:"#fff"}),this.textTimer.anchor.set(1,0),this.textTimer.setShadow(2,2,"rgba(0, 0, 0, .8)",0),this.group.add(this.textTimer),this.buttonSound=this.game.add.button(10,10,"soundButtons",this.handleClickSound,this,1,1,1,1,this.group),this.buttonSound.input.priorityID=2,Phaser.Device.desktop||(this.buttonPoster=this.game.add.button(this.game.width-20,this.game.height-20,"helpPoster",this.handleTogglePoster,this,1,1,1,1,this.group),this.buttonPoster.anchor.set(1,1),this.buttonPoster.input.priorityID=2)}return a(t,[{key:"update",value:function(t){var e=t.score,i=t.protestersAlive,s=t.protestersTotal,r=t.meanMood;this.buttonSound.frame=this.game.sound.mute?1:0,this.score.update({score:e,protestersAlive:i,protestersTotal:s,mood:100*r})}},{key:"updateTimer",value:function(t){this.textTimer.setText(t)}},{key:"handleClickSound",value:function(){this.game.sound.mute=!this.game.sound.mute}},{key:"handleTogglePoster",value:function(){this.onTogglePoster()}},{key:"kill",value:function(){this.group.killAll()}}]),t}();e.a=o},346:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(e){var i=e.game,a=e.x,o=e.y,n=e.width;s(this,t),this.game=i,this.group=this.game.add.group(),this.group.x=a,this.group.y=o,this.width=n,this.scoreMeter=this.game.add.graphics(),this.group.add(this.scoreMeter),this.moodMeter=this.game.add.graphics(),this.group.add(this.moodMeter),this.aliveMeter=this.game.add.graphics(),this.group.add(this.aliveMeter),this.label=this.game.add.text(-this.width/2+20,-8,this.game.mz.i18n.getTranslation(r.J),{font:"12px Arial",fill:"#000",align:"right"}),this.group.add(this.label)}return a(t,[{key:"update",value:function(t){var e=t.score,i=t.mood,s=t.protestersAlive,r=t.protestersTotal;this.updateScoreMeter(e),this.updateAliveMeter(s,r),this.updateMoodMeter(i)}},{key:"updateScoreMeter",value:function(t){this.updateMeter({graphics:this.scoreMeter,value:t,width:this.width,height:16,x:-this.width/2,y:0,colorThreshold:30})}},{key:"updateAliveMeter",value:function(t,e){this.updateMeter({graphics:this.aliveMeter,value:100*t/e,width:this.width/2-1,height:6,x:-this.width/2,y:13,colorThreshold:50})}},{key:"updateMoodMeter",value:function(t){this.updateMeter({graphics:this.moodMeter,value:t,width:this.width/2-1,height:6,x:1,y:13,colorThreshold:50})}},{key:"updateMeter",value:function(t){var e=t.graphics,i=t.value,s=t.width,r=t.height,a=t.x,o=t.y,n=t.colorThreshold;e.clear();var h=Phaser.Color.RGBArrayToHex([this.game.math.clamp(1+(n-i)/(100-n),0,1),this.game.math.clamp(i/n,0,1),0]);e.lineStyle(r,16777215,.9),e.moveTo(a,o),e.lineTo(a+s,o),e.lineStyle(r,h,1),e.moveTo(a,o),e.lineTo(a+Math.round(s*i/100),o)}}]),t}();e.a=o},347:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(e){var i=e.game;s(this,t),this.game=i,this.sprite=this.game.add.sprite(0,0),this.overlay=this.game.add.graphics(0,0),this.overlay.beginFill(16777215,.7),this.overlay.drawRect(0,0,this.game.width,this.game.height),this.overlay.endFill(),this.title=this.game.add.text(this.game.width/2,2/3*this.game.height/2,this.game.mz.i18n.getTranslation(r.I)),this.title.anchor.set(.5),this.replayButton=this.game.add.sprite(this.game.width/2,this.game.height/2,"playButton"),this.replayButton.anchor.set(.5),this.sprite.addChild(this.overlay),this.sprite.addChild(this.title),this.sprite.addChild(this.replayButton),this.sprite.fixedToCamera=!0,this.kill()}return a(t,[{key:"kill",value:function(){this.sprite.kill()}},{key:"revive",value:function(){this.sprite.revive()}}]),t}();e.a=o},348:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=i(128),o=function(){function t(t,e){var i=[],s=!0,r=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(s=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){r=!0,a=t}finally{try{!s&&n.return&&n.return()}finally{if(r)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),h=1500,l=3e3,u=function(){function t(e){var i=e.game,r=e.mode,a=e.score,o=e.stats;s(this,t),this.game=i,this.mode=r,this.stats=o;var n=this.game.height/6;this.sprite=this.game.add.sprite(0,0),this.sprite.fixedToCamera=!0,this.topStripe=this.game.add.graphics(0,0),this.topStripe.beginFill(0),this.topStripe.drawRect(0,-n,this.game.width,n),this.topStripe.endFill(),this.game.add.tween(this.topStripe).to({top:n},h).start().onComplete.addOnce(this.handleTweenComplete,this),this.bottomStripe=this.game.add.graphics(0,0),this.bottomStripe.beginFill(0),this.bottomStripe.drawRect(0,this.game.height,this.game.width,this.game.height+n),this.bottomStripe.endFill(),this.game.add.tween(this.bottomStripe).to({top:-n},h).start(),this.overlay=this.game.add.graphics(0,0),this.overlay.beginFill(0),this.overlay.drawRect(0,0,this.game.width,this.game.height),this.overlay.endFill(),this.overlay.alpha=0,this.game.add.tween(this.overlay).to({alpha:.5},l).start().onComplete.addOnce(this.showStats,this),this.replayButton=this.game.add.button(this.game.width-50,50,"repeatButton",this.handleClickPlay,this),this.replayButton.anchor.set(.5),this.replayButton.visible=!1,this.sprite.addChild(this.topStripe),this.sprite.addChild(this.bottomStripe),this.sprite.addChild(this.overlay),this.sprite.addChild(this.replayButton),this.sprite.addChild(a)}return n(t,[{key:"handleTweenComplete",value:function(){this.replayButton.visible=!0}},{key:"handleClickPlay",value:function(){this.game.state.start("StartMenu")}},{key:"showStats",value:function(){var t=this,e="";this.mode===r.h?e=r.r:this.mode===r.e?e=r.o:this.mode===r.g?e=r.q:this.mode===r.f&&(e=r.p);var i=this.game.width/15,s=this.game.add.text(i,40,this.game.mz.i18n.getTranslation(e),{font:"26px Arial",fill:this.mode===r.h?"#393":"#933",wordWrap:!0,wordWrapWidth:this.replayButton.left-2*i});this.sprite.addChild(s);var n=[[r.G,this.stats.revived],[r.C,this.stats.alive],[r.D,this.stats.arrested],[r.E,this.stats.left]];this.mode!==r.g&&n.unshift([r.F,String(a.a(this.stats.time))]);var h=s.bottom+s.top,l=0;n.forEach(function(e,s){var r=o(e,1),a=r[0],n=t.game.add.text(i,40*s+h,t.game.mz.i18n.getTranslation(a)+":",{font:"24px Arial",fill:"#fff"});n.width>l&&(l=n.width),t.sprite.addChild(n)}),l+=2*i,n.forEach(function(e,i){var s=o(e,2),r=(s[0],s[1]),a=t.game.add.text(l,40*i+h,String(r),{font:"24px Arial",fill:"#fff"});t.sprite.addChild(a)})}}]),t}();e.a=u},349:function(t,e,i){t.exports=i.p+"assets/1eee8294ebce070d081d09b07059a1a7.png"},8:function(t,e,i){"use strict";i.d(e,"N",function(){return s}),i.d(e,"M",function(){return r}),i.d(e,"i",function(){return a}),i.d(e,"g",function(){return o}),i.d(e,"e",function(){return n}),i.d(e,"f",function(){return h}),i.d(e,"h",function(){return l}),i.d(e,"b",function(){return u}),i.d(e,"d",function(){return p}),i.d(e,"c",function(){return d}),i.d(e,"a",function(){return c}),i.d(e,"T",function(){return m}),i.d(e,"U",function(){return g}),i.d(e,"S",function(){return f}),i.d(e,"R",function(){return y}),i.d(e,"k",function(){return v}),i.d(e,"j",function(){return b}),i.d(e,"Q",function(){return w}),i.d(e,"O",function(){return k}),i.d(e,"P",function(){return z}),i.d(e,"L",function(){return T}),i.d(e,"K",function(){return x}),i.d(e,"s",function(){return P}),i.d(e,"x",function(){return j}),i.d(e,"A",function(){return O}),i.d(e,"B",function(){return C}),i.d(e,"z",function(){return S}),i.d(e,"y",function(){return M}),i.d(e,"l",function(){return _}),i.d(e,"n",function(){return D}),i.d(e,"m",function(){return B}),i.d(e,"w",function(){return E}),i.d(e,"u",function(){return R}),i.d(e,"t",function(){return A}),i.d(e,"v",function(){return F}),i.d(e,"J",function(){return W}),i.d(e,"H",function(){return H}),i.d(e,"I",function(){return L}),i.d(e,"r",function(){return V}),i.d(e,"o",function(){return U}),i.d(e,"q",function(){return K}),i.d(e,"p",function(){return N}),i.d(e,"F",function(){return G}),i.d(e,"G",function(){return q}),i.d(e,"C",function(){return I}),i.d(e,"D",function(){return Y}),i.d(e,"E",function(){return Q});var s="ru",r="en",a={top:150,right:50,bottom:50,left:50},o="timeOut",n="playerKilled",h="protestRate",l="win",u="enter",p="wander",d="pursue",c="convoy",m="hide",g="hunt",f="hide",y="drive",v="normal",b="capture",w="wander",k="arrested",z="leave",T="wander",x="shooting",P="gameTitle",j="menuBack",O="menuLevel1",C="menuLevel2",S="menuHowTo",M="menuControls",_="controlsMove",D="controlsRun",B="controlsPoster",E="howToScale",R="howToCheer",A="howToCall",F="howToCops",W="uiScale",H="uiLoading",L="uiPause",V="endWin",U="endArrested",K="endTime",N="endFail",G="statsTime",q="statsTotal",I="statsActive",Y="statsArrested",Q="statsLeft"},83:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(8),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(e){var i=e.game,r=e.x,o=e.y,n=e.speed,h=e.spriteKey,l=e.spriteName,u=e.props;s(this,t),this.props=u,this.game=i,this.speed=a({current:n.value},n),this.sprite=this.game.add.sprite(r,o,h,0),this.sprite.mz=this,this.sprite.name=l,this.sprite.anchor.set(.5),this.game.physics.arcade.enable(this.sprite),this.sprite.body.reset(this.sprite.x,this.sprite.y),this.stayingTimer=this.game.time.create(!1),this.mode=null,this.moveTarget=[]}return o(t,[{key:"update",value:function(){if(this.moveTarget.length){var t=this.moveTarget[0],e=t.x,i=t.y,s=t.callback;this.game.math.fuzzyEqual(e,this.sprite.body.center.x,1)&&this.game.math.fuzzyEqual(i,this.sprite.body.center.y,1)&&(this.stop(),this.moveTarget.shift(),this.moveTarget.length&&this.setVelocity(this.moveTarget[0]),"function"==typeof s&&s())}}},{key:"setMode",value:function(t){this.mode=t}},{key:"setSpeed",value:function(t){this.speed.current!==t&&(this.speed.current=t,this.moveTarget.length&&this.setVelocity(this.moveTarget[0]))}},{key:"setVelocity",value:function(t){var e=this.game.math.angleBetweenPoints(this.sprite.body.center,t);this.game.physics.arcade.velocityFromRotation(e,this.speed.current,this.sprite.body.velocity)}},{key:"moveTo",value:function(t){t?(this.moveTarget=[{x:t.x,y:t.y,callback:t.callback}],this.setVelocity(t)):(this.stop(),this.moveTarget=[])}},{key:"getNextCoords",value:function(t){var e=[];t||(t={top:this.sprite.y-this.sprite.top+r.i.top,right:this.game.world.width-(this.sprite.right-this.sprite.x),bottom:this.game.world.height-(this.sprite.bottom-this.sprite.y),left:this.sprite.x-this.sprite.left}),this.sprite.x>t.left&&e.push("left"),this.sprite.x<t.right&&e.push("right"),this.sprite.y>t.top&&e.push("top"),this.sprite.y<t.bottom&&e.push("bottom");var i=this.game.rnd.between(0,e.length-1),s=this.sprite.x,a=this.sprite.y;switch(e[i]){case"left":s=this.game.rnd.between(t.left,this.sprite.x-1);break;case"right":s=this.game.rnd.between(this.sprite.x+1,t.right);break;case"top":a=this.game.rnd.between(t.top,this.sprite.y-1);break;case"bottom":a=this.game.rnd.between(this.sprite.y+1,t.bottom)}return{x:Math.round(s),y:Math.round(a)}}},{key:"updateProgressBar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65280;this.progressBar.clear(),0!==(t=this.game.math.clamp(t,0,1))&&(this.progressBar.lineStyle(1,e,1),this.progressBar.drawRect(-12.5,-32.5,25,5),this.progressBar.lineStyle(5,e,1),this.progressBar.moveTo(-12.5,-30),this.progressBar.lineTo(Math.round(25*(-.5+t)),-30))}},{key:"addMoveTarget",value:function(t){this.moveTarget.length?this.moveTarget.push(t):this.moveTo(t)}},{key:"stop",value:function(){this.sprite.body.stop()}},{key:"stopWandering",value:function(){this.moveTo(null),this.stayingTimer.stop(!0)}},{key:"revive",value:function(){this.sprite.revive(1)}},{key:"kill",value:function(){this.mode=null,this.moveTo(null),this.sprite.kill()}}]),t}();e.a=n}});